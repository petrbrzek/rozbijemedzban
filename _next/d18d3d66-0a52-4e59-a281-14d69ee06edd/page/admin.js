module.exports=__NEXT_REGISTER_PAGE("/admin",function(){var e=webpackJsonp([5],{206:function(e,t,r){e.exports=r(207)},207:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(4);var a=r.n(n);var l=r(109);var o=r(76);var i=r.n(o);var u=r(113);var s=r(122);var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"===typeof t||"function"===typeof t)?t:e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h=function(e){d(t,e);function t(){p(this,t);return f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c(t,[{key:"render",value:function e(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Admin page"),a.a.createElement(y,null,a.a.createElement(v,null)))}}]);return t}(a.a.Component);var m=function(e){d(t,e);function t(){p(this,t);return f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c(t,[{key:"render",value:function e(){if(!this.props.data)return null;if(this.props.data.loading)return a.a.createElement("h1",null,"Loading...");if(!this.props.data.allAttendees)return a.a.createElement("div",null,a.a.createElement("h1",null,"Nemáš oprávnění na to vidět obsah této stránky"));return a.a.createElement("div",null,this.props.data.allAttendees.map(function(e){return a.a.createElement("div",null,a.a.createElement("b",null,e.fullName))}))}}]);return t}(a.a.Component);var v=Object(o["compose"])(Object(o["graphql"])(s["c"]))(m);var E=function(e){d(t,e);function t(){var e;var r,n,a;p(this,t);for(var l=arguments.length,o=Array(l),i=0;i<l;i++)o[i]=arguments[i];return a=(r=(n=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n),n.state={email:null,password:null,dirty:false,error:null},n._handleLogin=function(){if(!n.state.dirty)n.setState({dirty:true});var e=n.state,t=e.email,r=e.password;if(!t&&!r)return;n.props.authenticateUser({variables:{email:t,password:r}}).then(function(e){var t=e.data.authenticateUser.token;localStorage.setItem("graphcoolToken",t);n.props.data.refetch();n.setState({dirty:false,error:null})}).catch(function(e){console.log("AuthenticateUser failed ");n.setState({error:"Login failed"})})},r),f(n,a)}c(t,[{key:"render",value:function e(){var t=this;console.log(this.props);var r=this.props.data;if(!r)return null;if(r.loading)return a.a.createElement("div",null,a.a.createElement("h1",null,"Loading..."));var n=r.loggedInUser;if(!n)return a.a.createElement("div",null,a.a.createElement("h1",null,"Restricted area. Please log in first"),a.a.createElement("div",null,a.a.createElement("input",{type:"email",placeholder:"E-mail",onChange:function e(r){return r&&t.setState({email:r.target.value})}})),a.a.createElement("div",null,a.a.createElement("input",{type:"password",placeholder:"Password",onChange:function e(r){return r&&t.setState({password:r.target.value})}})),a.a.createElement("div",null,a.a.createElement("button",{onClick:this._handleLogin},"Log in")),this.state.dirty?a.a.createElement("div",null,!this.state.email&&a.a.createElement("h2",null,"E-mail field is required"),!this.state.password&&a.a.createElement("h2",null,"Password field is required")):null,this.state.error?a.a.createElement(l["a"],{color:"red"},this.state.error):null);return a.a.createElement("div",null,this.props.children)}}]);return t}(a.a.Component);var y=Object(o["compose"])(Object(o["graphql"])(s["d"]),Object(o["graphql"])(s["a"],{name:"authenticateUser"}))(E);t["default"]=Object(u["a"])(h)}},[206]);return{page:e.default}});